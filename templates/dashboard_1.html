<!DOCTYPE html>
<html>
<head>
    <title>Sales Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Sales Dashboard</h1>

    <div style="width: 50%;">
        <canvas id="chart1"></canvas>
    </div>
    <div style="width: 50%;">
        <canvas id="chart2"></canvas>
    </div>
    <div style="width: 50%;">
        <canvas id="chart3"></canvas>
    </div>
    <div style="width: 50%;">
        <canvas id="chart4"></canvas>
    </div>

    <script>
        // Function to fetch data from the server (example using fetch API)
        async function fetchData(query) {
            try {
                const response = await fetch('/data', { // Replace '/data' with your server endpoint
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ query: query })
                });
                const data = await response.json();
                return data;
            } catch (error) {
                console.error("Error fetching data:", error);
                return null;
            }
        }


        async function createCharts() {
            // Chart 1: Total Sales by Region
            const query1 = "SELECT Region, SUM(Sales) AS TotalSalesByRegion FROM Sales GROUP BY Region";
            const data1 = await fetchData(query1);

            if (data1) {
                new Chart(document.getElementById('chart1').getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: data1.map(row => row.Region),
                        datasets: [{
                            label: 'Total Sales by Region',
                            data: data1.map(row => row.TotalSalesByRegion),
                            backgroundColor: ['rgba(54, 162, 235, 0.2)'],
                            borderColor: ['rgba(54, 162, 235, 1)'],
                            borderWidth: 1
                        }]
                    },
                    options: {  // Added options for better visualization
                        scales: {
                            y: { beginAtZero: true } // Start y-axis at 0
                        }
                    }
                });
            }


            // Similarly create other charts (chart2, chart3, chart4)

        }

        createCharts();



    </script>
</body>
</html>