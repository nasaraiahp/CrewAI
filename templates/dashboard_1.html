<!-- templates/dashboard.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Sales Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>Sales Dashboard</h1>

    <form method="POST">
        <label for="chart_type">Select Chart Type:</label>
        <select name="chart_type" id="chart_type">
            {% for chart_type, chart_title in chart_types.items() %}
                <option value="{{ chart_type }}" {% if chart_type == selected_chart_type %}selected{% endif %}>{{ chart_title }}</option>
            {% endfor %}
        </select>
        <button type="submit">Update Chart</button>
    </form>

    {% if error %}
        <p style="color: red;">{{ error }}</p>
    {% endif %}


    <div id="chart-container"></div>

    <script>
        var chart_data = {{ bar_chart | safe if selected_chart_type == 'bar' else pie_chart | safe }};
        if (chart_data) {
            Plotly.newPlot('chart-container', JSON.parse(chart_data));
        } else {
            document.getElementById('chart-container').innerHTML = '<p>No data available for this chart type.</p>';
        }
    </script>
</body>
</html>